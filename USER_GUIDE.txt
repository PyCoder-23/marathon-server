═══════════════════════════════════════════════════════════════════════════
                        MARATHON SERVER - OFFICIAL USER GUIDE
═══════════════════════════════════════════════════════════════════════════

Welcome to Marathon Server - the ultimate gamified productivity platform designed 
to turn your study habits into a competitive sport. 

This comprehensive guide covers every single feature, mechanic, and rule 
of the platform. Whether you are a cadet just starting out or a seasoned 
veteran aiming for the Hall of Fame, this is your manual.

═══════════════════════════════════════════════════════════════════════════
TABLE OF CONTENTS
═══════════════════════════════════════════════════════════════════════════

1.  ACCOUNT & AUTHENTICATION
2.  ONBOARDING & SQUAD ASSIGNMENT
3.  COMMAND CENTER (DASHBOARD)
4.  THE STUDY TIMER & XP MECHANICS
5.  MISSION CONTROL & PENALTIES
6.  SQUAD SYSTEM & RANKINGS
7.  GLOBAL LEADERBOARDS
8.  HALL OF FAME
9.  THE PLANNER
10. PUBLIC PROFILES & PRIVACY
11. SETTINGS & SECURITY
12. ADMIN PANEL (ACCESS RESTRICTED)
13. TECHNICAL SPECIFICATIONS (IST)
14. TROUBLESHOOTING

═══════════════════════════════════════════════════════════════════════════
1. ACCOUNT & AUTHENTICATION
═══════════════════════════════════════════════════════════════════════════

The first step to glory is securing your identity.

SIGNING UP:
• Navigate to the /signup page.
• Enter a unique Username (this will be your public identity).
• Enter a valid Email Address (required for verification and recovery).
• Create a strong Password.
• Click "Join Camp".
  -> Triggers an email verification flow.
  -> Check your email inbox (and spam folder) for a 6-digit code.
  -> Enter the code on the verification page to activate your account.

LOGGING IN:
• Navigate to /login.
• You can log in using either your Username OR Email.
• The system is case-insensitive (e.g., "UserOne" and "userone" work the same).
• Enter your password and click "Login".
• If valid, you are redirected to the Dashboard.
• Your session is persistent; you won't need to log in every time unless you logout.

FORGOT PASSWORD:
• If you lose your credentials, click "Forgot Password?" on the login screen.
• Enter your registered Email Address.
• The system sends a secure 6-digit reset code to your inbox.
• On the next screen, enter:
  a. The 6-digit code
  b. Your NEW password
• Once verified, your password is instantly updated, and you can log in.

═══════════════════════════════════════════════════════════════════════════
2. ONBOARDING & SQUAD ASSIGNMENT
═══════════════════════════════════════════════════════════════════════════

Marathon Server uses an automated balancing system to ensure fair competition.

AUTO-SQUAD ASSIGNMENT:
• Upon account creation, you do not choose a squad manually.
• The "Sorting Hat" algorithm assigns you to the Squad with the LOWEST Total XP.
• Why? This prevents "super squads" from dominating simply by having the most members.
• It ensures that new reinforcements (you!) go to the teams that need them most.

DEFAULT PROFILE PICTURE:
• You are automatically assigned one of 10 high-quality default avatars (pfp1-pfp10).
• Assignments are random based on your User ID.
• You can change this later in Settings.

WELCOME BRIEFING:
• After verification, you are taken to a /welcome page.
• It gives you a quick rundown of the platform's core philosophy.
• Provides access to the official Discord community.

═══════════════════════════════════════════════════════════════════════════
3. COMMAND CENTER (DASHBOARD)
═══════════════════════════════════════════════════════════════════════════

The Dashboard (/dashboard) is your HQ. It is divided into strategic sectors.

A. DAILY PROGRESS STATS (Top Left Card):
• Today's Hours: Total study time logged *Since 12:00 AM IST Today*.
• Goal: A fixed daily target (Default: 6.0 Hours).
• Progress Bar: Visualizes how close you are to the 6-hour daily goal.
• Pomodoros: Counts how many full 25-minute sessions you've finished today.
• Streak: Current consecutive days studied (maintained by studying once/day IST).

B. WEEKLY XP GRAPH (Large Right Card):
• Visualizes your performance over the last 7 days.
• X-Axis: Displays the Day Name (e.g., Mon, Tue, Wed).
• Y-Axis: Shows XP gained.
• Data Alignment: Strictly follows IST (Indian Standard Time).
  -> The last point on the right is always "Today" (IST).
  -> The graph updates in real-time as you finish sessions.
• Interactive: Hover over any point to see the exact Date and precise XP amount.

C. THE SESSION TIMER (Middle/Left):
• The heartbeat of the app.
• Large digital display (MM:SS).
• "Start Session" / "Stop Session" buttons.
• Subject Input: Optional text field to tag your session (e.g., "Math", "History").

D. SQUAD STATUS (Bottom Right):
• Shows your current Squad's banner, Name, and Slogan.
• Displays a "View Squad Details" button for quick access to your teammates.

E. QUICK ACTIONS (Bottom Row):
• Buttons to quickly jump to Missions, Squads, Leaderboard, or History.

═══════════════════════════════════════════════════════════════════════════
4. THE STUDY TIMER & XP MECHANICS
═══════════════════════════════════════════════════════════════════════════

Marathon Server rewards *consistency*, not just presence.

THE 25-MINUTE RULE:
• You ONLY earn XP for sessions that are 25 minutes or longer.
• This is based on the Pomodoro technique.
• If you stop a session at 24 minutes and 59 seconds:
  -> YOU EARN 0 XP.
  -> It does NOT count towards missions.
  -> It does NOT increment your streak.
• A warning popup appears if you try to stop early, giving you a chance to continue.

XP CALCULATION FORMULA:
• Rate: 20 XP per 25-minute block.
• We calculate "Blocks" = floor(Total Minutes / 25).
• Total XP = Blocks * 20.
  -> Example: 25 mins = 20 XP.
  -> Example: 49 mins = 20 XP (Only 1 full block).
  -> Example: 50 mins = 40 XP (2 full blocks).
• Why? This encourages finishing that extra few minutes to complete the cycle.

SUBJECT TAGGING:
• You can enter a subject before or during a session.
• This is saved to your session history for your own tracking.
• Useful for reviewing what you spent your time on later.

SESSION STATE:
• If you close the tab or refresh, the timer logic persists on the server.
• However, ensure you have the tab open to "Stop" it and claim rewards.
• Only ONE active session is allowed per user at a time.

═══════════════════════════════════════════════════════════════════════════
5. MISSION CONTROL & PENALTIES
═══════════════════════════════════════════════════════════════════════════

Missions are high-stakes contracts you sign to earn bonus XP.

MISSION TYPES:
• Daily: Expires at 12:00 AM IST Tonight.
• Weekly: Expires at 12:00 AM IST on Monday.
• Long-Term: No expiry, milestone-based achievements.

DIFFICULTY TIERS:
• Easy (Green): 50-100 XP. Simple tasks like "Study 50 minutes".
• Medium (Yellow): 100-200 XP. Moderate tasks like "Complete 4 sessions".
• Hard (Red): 200-300 XP. Challening tasks like "Study 6 hours in a day".

THE FLOW:
1. "Available" Tab: Browse missions here.
2. "Accept": You MUST click Accept to start tracking a mission.
3. "In Progress": The mission moves to your active Missions tab.
4. "Check Progress": Click this button to sync your stats.
5. "Claim": Once criteria are met, the XP is awarded instantly.
6. "Withdraw": Realized you can't make it? Click Withdraw.
   -> Uses 1 "Mission Pardon" (if owned) OR costs 50 Coins.
   -> Removes the mission without XP penalty.

THE PENALTY SYSTEM (WARNING):
• This is what makes Marathon Server hardcore.
• If you ACCEPT a mission but FAIL to complete it before it expires:
  -> You are PENALIZED.
  -> Penalty Amount = 50% of the Release Reward (Rounded Up).
• Example: You accept a Hard Mission (Reward: 300 XP).
  -> You fail to finish it by reset time.
  -> DEDUCTION: -150 XP.
• Yes, your total XP can go NEGATIVE.
• Strategy: Do not accept missions unless you are sure you can finish them.

RESET TIMES:
• Daily Missions reset every single night at 12:00 AM IST.
• Weekly Missions reset every Monday at 12:00 AM IST.
• Upon opening the Missions page after a reset, the system calculates results for expired missions and applies penalties or cleanups automatically.

═══════════════════════════════════════════════════════════════════════════
6. SHOP & ECONOMY
═══════════════════════════════════════════════════════════════════════════

The Cyber Bazaar is where you spend Coins earned from missions and sessions.

CURRENCY (COINS):
• Earned by completing missions, certain challenges, or rare events.
• Used to buy cosmetics and survival items.
• Your balance is visible on the Dashboard and Profile.

COSMETICS:
• Profile Frames: Neon, RGB, and Animated borders for your avatar.
• Nameplates: Glowing, Glitching, or Burning text effects for your username.
• Banners (Coming Soon): Backgrounds for your profile header.
• Equip/Unequip: Manage your look in the "Shop" tab. Select "Default" to remove an item.

SURVIVAL GEAR:
• Mission Pardon: A consumable item.
  -> Max Inventory: 3.
  -> Usage: Allows you to Withdraw from an active mission for FREE (no coin cost, no XP penalty).
  -> Essential for saving your streak when life gets busy.

═══════════════════════════════════════════════════════════════════════════
7. SQUAD SYSTEM & RANKINGS
═══════════════════════════════════════════════════════════════════════════

You are never fighting alone. You are part of a Squad.

SQUAD XP:
• A Squad's Score is the SUM of all its current members' Total XP.
• If you work hard, your squad rises.
• If you slack off or take penalties, your squad falls.

RANK BADGES:
• Top 4 squads receive animated badges: Diamond, Gold, Silver, Bronze.

SQUAD DETIALS PAGE:
• Lists every member of the squad.
• Sorted by XP contribution (Highest to Lowest).

JOINING/LEAVING:
• Currently, movement is restricted to Admin actions or initial auto-assignment.

═══════════════════════════════════════════════════════════════════════════
8. GLOBAL LEADERBOARDS
═══════════════════════════════════════════════════════════════════════════

The arena where champions are proven. Your equipped Frames and Nameplates are visible here to all rivals.

VIEWS:
• Weekly: Resets every Monday. Shows who is winning *right now*.
• Monthly: Resets on the 1st. Shows consistent performance over 30 days.
• All-Time: The legends. Never resets.

THE PODIUM:
• Top 3 users get a distinctive visual display.
• Equipped cosmetics (Frames/Nameplates) are fully animated on the podium.

THE LIST:
• Ranks 4 through 50 are shown in a tabular list.
• Your own entry is highlighted in blue.

═══════════════════════════════════════════════════════════════════════════
9. HALL OF FAME
═══════════════════════════════════════════════════════════════════════════

History is written by the victors.

PURPOSE:
• Captures a snapshot of the winners at the exact moment of reset.
• Weekly Winners: Archived every Monday at 12:01 AM IST.
• Monthly Winners: Archived every 1st of the Month at 12:01 AM IST.

═══════════════════════════════════════════════════════════════════════════
10. THE PLANNER
═══════════════════════════════════════════════════════════════════════════

Ideally, you shouldn't just study; you should plan.

CALENDAR VIEW:
• A visual drag-and-drop style calendar interface.
• Views: Month, Week, Day.
• Click anywhere to "Add Event".
• Set Title, Description, and Color coding.
• Useful for blocking out study times for future missions.

SIMPLE TO-DO LIST:
• Toggled by a button below the calendar ("Use a simple to-do list here").
• A minimalist list for quick tasks.
• "Add Task": Type and hit enter.
• "Complete": Click the circle to strike-through.
• "Delete": Remove clutter.
• Best for daily checklists like "Read Chapter 4", "Solve 5 problems".

═══════════════════════════════════════════════════════════════════════════
═══════════════════════════════════════════════════════════════════════════
11. PUBLIC PROFILES & PRIVACY
═══════════════════════════════════════════════════════════════════════════

Every user has a public profile that showcases their achievements.

ACCESS:
• Visit via URL: /profile/<username>
• Click "Profile" in the top-right dropdown menu.
• Click any user's name on the Leaderboard or Squad pages.

CONTENT:
• PFP & Name: Identity and Squad affiliation. Includes equipped Frames/Nameplates.
• Ranks: Displays Global Rank and Squad Rank.
• Graph: A Weekly Activity graph (similar to Dashboard) showing their recent consistency.
• Legacy: A count of their Hall of Fame wins.
• Lifetime Stats: Total XP, Total Practice Minutes, and Total Coins.

PRIVACY LOCK:
• If you prefer to train in shadow, you can LOCK your profile.
• Visitors to a locked profile see a blurred screen with a Lock icon.
• No stats, graphs, or ranks are visible to the public.
• You (the owner) can ALWAYS see your profile, even if locked.
• Note: Your name and XP will still appear on Leaderboards, but clicking your name will lead to a locked page.

═══════════════════════════════════════════════════════════════════════════
12. SETTINGS & SECURITY
═══════════════════════════════════════════════════════════════════════════

Located at /settings or via "Settings" in the top-right dropdown.

PROFILE CUSTOMIZATION:
• Display Name: Update how you appear on leaderboards.
• Profile Picture (3 Methods):
  1. Default: Spin the wheel for one of 10 presets.
  2. URL: Paste a link to an image hosted elsewhere.
  3. Upload: Upload a file from your device (Converted to Base64).

PRIVACY SETTINGS:
• "Lock Profile": A toggle switch to enable/disable the profile lock described in Section 11.

ACCOUNT SECURITY:
• Email Update: You can change your email, but you must enter your Current Password to verify ownership.
• Change Password:
  - Requires: Current Password, New Password, Confirm New Password.
  - Critical for keeping your hard-earned XP safe.

═══════════════════════════════════════════════════════════════════════════
13. ADMIN PANEL (ACCESS RESTRICTED)
═══════════════════════════════════════════════════════════════════════════

Accessible only to users with the `isAdmin` flag in the database.

DASHBOARD:
• A high-level view of Total Users, Active Sessions, and Platform health.

USER MANAGEMENT:
• Search: Find any user by Name or Email.
• Edit Stats: Admins can manually correct XP, Minutes, or Coins.
• Ban User:
  -> Banning locks the account for 7 Days.
  -> Banned users cannot login.
  -> Used for cheating or toxic behavior.
• Delete User:
  -> The nuclear option.
  -> Permanently removes User, Sessions, XP History, and Mission data.
  -> Cannot be undone.

AUDIT LOGS:
• Every admin action (Edit/Ban/Delete) is recorded in an immutable log.
• Ensures admins are accountable for their changes.

═══════════════════════════════════════════════════════════════════════════
14. TECHNICAL SPECIFICATIONS (TIMEZONE)
═══════════════════════════════════════════════════════════════════════════

The Single Source of Truth:
• The server operates on IST (Indian Standard Time).
• IST = UTC + 5:30.

WHY IS THIS IMPORTANT?
1. Daily Stats: Reset at 12:00 AM IST. If you live in New York, this might be 1:30 PM your time.
2. Streaks: You must log a session within the 24-hour IST window to keep your streak.
3. Graphs: The weekly graph shows days aligned to IST. 
   -> If you study at 11:55 PM IST and finish at 12:20 AM IST, the session counts for the day it *started* (usually) or the XP is awarded when it *ends*. (In Marathon Server, XP is awarded at the STOP moment, so it counts for the day you finished).

═══════════════════════════════════════════════════════════════════════════
15. TROUBLESHOOTING
═══════════════════════════════════════════════════════════════════════════

Q: My XP shows negative?
A: You likely accepted a mission and failed to complete it. Check your Mission History.

Q: The graph dates look wrong?
A: Remember, they are IST dates. It might be "Tomorrow" in India already compared to your local time.

Q: I didn't get a verification email?
A: Check Spam. If using a strict organization email, try a Gmail/Outlook address.

Q: I studied for 20 minutes but got 0 XP?
A: Working as intended. Minimum session length is 25 minutes.

Q: Can I pause a session?
A: No. The timer runs continuously. Pause is for the weak. (Technical reason: simpler verification logic).

Q: My profile says "Locked" to my friend?
A: You enabled "Lock Profile" in Settings. Disable it if you want them to see your stats.

═══════════════════════════════════════════════════════════════════════════
                    Train Hard. Stay Consistent.
                  Welcome to Marathon Server.
═══════════════════════════════════════════════════════════════════════════
